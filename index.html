<!doctype html>
<!--
  Material Design Lite
  Copyright 2015 Google Inc. All rights reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      https://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Fully code generated event bus for Java/Android, based on Otto">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <title>Toot</title>

  <link rel="icon" type="image/png" href="favicon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="favicon/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="favicon/favicon-192x192.png" sizes="192x192">
  <meta name="theme-color" content="#F44336">

  <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
  <!--
  <link rel="canonical" href="http://www.example.com/">
  -->

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.deep_orange-red.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
  <header class="demo-header mdl-layout__header mdl-color--grey-100 mdl-color-text--grey-600">
    <div class="mdl-layout__header-row">
      <span class="mdl-layout-title">Toot</span>
      <div class="mdl-layout-spacer"></div>
      <label class="mdl-button mdl-js-button mdl-button--icon">
        <a href="http://github.com/oriley-me/toot" target="_blank">
          <i class="action-bar-icons fa fa-github" aria-hidden="true"></i>
        </a>
      </label>
      <label class="mdl-button mdl-js-button mdl-button--icon">
        <a class="smooth" href="#dependency">
          <i class="action-bar-icons fa fa-download" aria-hidden="true"></i>
        </a>
      </label>
    </div>
  </header>
  <div class="demo-drawer mdl-layout__drawer mdl-color--deep-orange-900 mdl-color-text--white">
    <nav class="demo-navigation mdl-navigation mdl-color--deep-orange-900">
      <a class="mdl-navigation__link smooth" href="#introduction">Introduction</a>
      <a class="mdl-navigation__link smooth" href="#usage">Usage</a>
      <a class="mdl-navigation__link smooth" href="#dependency">Dependency Setup</a>
      <a class="mdl-navigation__link smooth" href="#license">License</a>
      <div class="mdl-layout-spacer"></div>
      <a class="mdl-navigation__link" href="http://github.com/oriley-me/toot" target="_blank">Fork on Github</a>
      <a class="mdl-navigation__link" href="http://oriley.me" target="_blank">O'Riley ME</a>
    </nav>
  </div>
  <main class="mdl-layout__content mdl-color--grey-100">
    <div class="mdl-grid demo-content">
      <div id="introduction"
           class="demo-updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--12-col-desktop">
        <div class="mdl-card__title mdl-card--expand mdl-color--deep-orange-500">Introduction</div>
        <div class="mdl-card__supporting-text mdl-color-text--grey-600">
          <p>Toot is an event bus designed to decouple different parts of your application while still allowing them
            to communicate efficiently.</p>

          <p class="no-bottom-padding">Forked from <a href="http://square.github.io/otto/" target="_blank">Otto</a>
            (which in turn forked from
            <a href="https://github.com/google/guava" target="_blank">Guava</a>), Toot adds the speed of using compile
            time code generation, rather than using reflection like the predecessors. On top of that, Toot supports
            subscribers in super classes, and doesn't throw an exception if you try to unregister a class which is not
            registered.</p>
        </div>
      </div>
      <div id="usage"
           class="demo-updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--12-col-desktop"
           style="display: none;">
        <div class="mdl-card__title mdl-card--expand mdl-color--deep-orange-500">Usage</div>
        <div class="mdl-card__supporting-text mdl-color-text--grey-600">
          <p>Toot is designed with Android-specific use cases (although it can be used in Java only projects as well)
            in mind and is intended for use as a singleton (optional). Create an instance of an event bus with</p>
          <div class="codeblock">
            <pre class="prettyprint">Bus bus = new Bus();</pre>
          </div>
          <p>Because a bus is only effective if it is shared, we recommend obtaining the instance through injection or
            another appropriate mechanism.</p>

          <h5>Publishing</h5>
          <p>Event publishing is the most important part of the bus as it allows you to tell subscribers that an
            action has occurred. An instance of any class may be published on the bus and it will only be dispatched to
            subscribers for that type. The class must not be private.
          </p>
          <p>To publish a new event, call the <code>post</code> method:</p>
          <div class="codeblock">
            <pre class="prettyprint">bus.post(new AnswerAvailableEvent(42));</pre>
          </div>
          <p>Posting to the bus is a synchronous action so when program execution continues it is guaranteed that all
            subscribers have been called.</p>

          <h5>Subscribing</h5>
          <p>Subscription is the complement to event publishing&mdash;it lets you receive notification that an event
            has occurred. To subscribe to an event, annotate a method with <code>@Subscribe</code>. The method should
            take only a single parameter, the type of which will be the event you wish to subscribe to.</p>
          <p>To listen for the event published in the previous section we would need the following:</p>
          <div class="codeblock"><pre class="prettyprint">@Subscribe
void onAnswerAvailable(AnswerAvailableEvent event) {
    // TODO: React to the event somehow!
}</pre>
          </div>
          <p>The name of the method can be anything you like. The annotation, single argument, non-static and a
            non-private access level are all that is required.</p>
          <p>In order to receive events, a class instance needs to register with the bus. If <code>this</code> refers
            to an instance of the class in which the previous method was present, we can register using the
            following:</p>
          <div class="codeblock">
            <pre class="prettyprint">bus.register(this);</pre>
          </div>
          <p>Registering will find methods on the current class type, as well as all super types. In the case that a
            parent class and subclass both wish to react to the same event, you must name the subscription methods
            differently, otherwise the method in the subclass will be called twice. This is an inherent Java limitation.
            If you wish to prevent this from happening, consider marking the method in the parent class as
            <code>final</code>
            to ensure it can't accidentally be overridden</p>

          <p>Remember to also call the <code>unregister</code> method when appropriate. This would usually be in the
            opposing lifecycle callback. So for an <code>Activity</code> or <code>Fragment</code>, if you register in
            <code>onResume</code>, you should unregister in <code>onPause</code></p>

          <h5>Producing</h5>
          <p>When subscribing to events it is often desired to also fetch the current known value for specific events
            (e.g., current location, active user, etc.). To address this common paradigm, Otto added the concept of
            'Producers' which provide an immediate callback to any subscribers upon their registration.</p>
          <p>To create a producer, annotate a method with <code>@Produce</code>. The method should take no parameters
            and its return type will be used as the type of event for which it can produce initial values. If we are
            keeping track of the last answer event somewhere from above we can register to produce its initial
            value:</p>
          <div class="codeblock"><pre class="prettyprint">@Produce
AnswerAvailableEvent produceAnswerAvailable() {
    // Assuming 'lastAnswer' exists.
    return new AnswerAvailableEvent(this.lastAnswer);
}</pre>
          </div>
          <p>Producers, like subscribers, must also be registered:</p>
          <div class="codeblock">
            <pre class="prettyprint">bus.register(this);</pre>
          </div>
          <p>When registering, the producer method will be called once for each subscriber previously registered for
            the same type. The producer method will also be called once for each new method that subscribes to an event
            of the same type.</p>
          <p>You may only have one producer per event type registered at a time on a bus.</p>

          <h5>Thread Enforcement</h5>
          <p>Since at times it may be ambiguous on which thread you are receiving callbacks, Toot provides an
            enforcement mechanism to ensure you are always called on the thread you desire. By default, all interaction
            is allowed to occur on any thread.</p>
          <div class="codeblock"><pre class="prettyprint">// Both of these are functionally equivalent.
Bus bus1 = new Bus();
Bus bus2 = new Bus(ThreadEnforcer.ANY);</pre>
          </div>

          <p class="no-bottom-padding">If you wish to confine operations to the main thread, you must use the <code>toot-android</code>
            dependency,
            and instantiate the bus with a <code>UiThreadEnforcer</code>. The included <code>UiBus</code> class takes
            care
            of this for you. You can also provide your own implementation of the <code>ThreadEnforcer</code> interface
            if
            you need additional functionality or validation.</p>
        </div>
      </div>
      <div id="dependency"
           class="demo-updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--12-col-desktop"
           style="display: none;">
        <div class="mdl-card__title mdl-card--expand mdl-color--deep-orange-500">
          <div style="width: 100%;">Dependency Setup</div>
          <div style="width: 100%;">
            <a href="https://jitpack.io/#com.github.oriley-me/toot" style="float: right;" target="_blank">
              <img class="jitpack-badge" height="28" src="static/jitpack-placeholder.svg" alt="JitPack">
            </a>
          </div>
        </div>
        <div class="mdl-card__supporting-text mdl-color-text--grey-600">

          <p>The source code to Toot, and this website is <a href="http://github.com/oriley-me/toot">available on
            GitHub</a></p>

          <h5>Add JitPack.io to your projects repositories list</h5>
          <div class="codeblock"><pre class="prettyprint">repositories {
    maven { url "https://jitpack.io" }
}</pre>
          </div>

          <h5>Add the required dependencies to your app module</h5>
          <div class="codeblock"><pre class="prettyprint">dependencies {
    // Required
    provided 'com.github.oriley-me.toot:toot-annotations:<span class="version">x.y.z</span>'
    apt 'com.github.oriley-me.toot:toot-processor:<span class="version">x.y.z</span>'

    // Only use this if you want to use a UiBus/UiThreadEnforcer (will automatically include toot-runtime)
    compile 'com.github.oriley-me.toot:toot-android:<span class="version">x.y.z</span>'

    // Use this if you want to handle threading yourself, or use Toot on a non Android project
    compile 'com.github.oriley-me.toot:toot-runtime:<span class="version">x.y.z</span>'
}</pre>
          </div>

          <p class="no-bottom-padding">If you would like to check out the latest development version, please substitute
            all versions for <strong>-SNAPSHOT</strong>. Keep in mind that it is very likely things could break or be
            unfinished, so stick the official releases if you want things to be more predictable.</p>
        </div>
      </div>
      <div id="license"
           class="demo-updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--12-col-desktop"
           style="display: none;">
        <div class="mdl-card__title mdl-card--expand mdl-color--deep-orange-500">License</div>
        <div class="mdl-card__supporting-text mdl-color-text--grey-600">
          <div class="codeblock no-bottom-margin"><pre>Copyright 2016 Kane O'Riley

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</pre>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="span12 logo">
        <a href="http://oriley.me" target="_blank"><img src="static/logo-oriley.png" alt="O'Riley ME"/></a>
      </div>
    </div>
  </main>
</div>

<script src="https://code.getmdl.io/1.1.3/material.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script src="static/jquery.jitpack.js"></script>
<script type="text/javascript">
  $(function () {
    // Syntax highlight code blocks.
    prettyPrint();

    $('a.smooth').click(function (e) {
      e.preventDefault();
      var href = $(this).attr("href");
      var target = $(href == "#" || href == "" ? 'html' : href);
      $(".mdl-layout__content").animate({scrollTop: 0}, 0, "swing");

      var sections = document.getElementsByClassName('mdl-card');
      for (var i = 0; i < sections.length; ++i) {
        sections[i].style.display = "none";
      }

      target.get(0).style.display = 'block';

      // close the drawer the button is clicked
      var obfuscator = $('.mdl-layout__obfuscator');
      if (obfuscator.is('.is-visible')) {
        obfuscator.toggleClass('is-visible');
        $('.mdl-layout__drawer').toggleClass('is-visible');
      }
    });
  });

  function init() {
    // Look up the latest version of the library.
    $.fn.latestVersion('com.github.oriley-me', 'toot', function (version) {
      $('.version').text(version);
      $('.version-hint').hide();

      var badges = document.getElementsByClassName('jitpack-badge');
      for (var i = 0; i < badges.length; ++i) {
        badges[i].setAttribute('src', "https://img.shields.io/badge/JitPack-" + version + "-323232.svg?style=flat");
      }
    });
  }
  window.onload = init;
</script>
</body>
</html>